'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},_createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,'value'in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var Slider=function(){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,a),b)'string'==typeof b?this.slider=document.querySelector(b):(b instanceof HTMLElement||1===b.nodeType)&&(this.slider=b);else return;if(c&&'object'===('undefined'==typeof c?'undefined':_typeof(c))&&(this.options=c),this.data={activeBreakpoint:null,animating:!1,breakpoints:[],breakpointSettings:[],currentSlide:0,currentPosition:0,dotsList:null,hovering:!1,interval:null,touchStart:null,touchMove:null,touchEnd:null,touchDistance:null},this.defaults={amountOfSlides:1,autoplay:!1,autoplaySpeed:6e3,activeSlideClass:'active',dots:!1,easing:'cubic-bezier(0.67, 0, 0.34, 1)',forceSlideWidth:!0,prevButton:document.getElementById('slider-prev'),nextButton:document.getElementById('slider-next'),pauseOnHover:!0,parallax:!1,parallaxIntensity:2,slidesToScroll:1,scroll:!1,scrollIntensity:5,touch:!0,touchTreshold:100,transitionSpeed:500,responsive:[]},null!==this.slider){if(this.slider.children.length)this.slides=this.slider.children;else return;this.init()}}return _createClass(a,[{key:'init',value:function init(){this.overwriteOptions(this.options),this.registerBreakpoints(),this.checkResponsive(),this.setActiveSlides(),this.addFlexToRails(),this.setSliderWidth(),this.setSlideWidth(),this.setSlideIndex(),this.setActiveSlides(),this.selectParallaxElements(),this.setParallaxPosition(),this.initEvents(),this.startInterval()}},{key:'update',value:function update(b){b&&'object'===('undefined'==typeof b?'undefined':_typeof(b))&&(this.options=b,this.init())}},{key:'overwriteOptions',value:function overwriteOptions(b){for(var c in this.defaults)this.defaults.hasOwnProperty(c)&&(void 0!==b[c]&&(this.defaults[c]=b[c]),void 0!==this.slider.dataset[c]&&(this.defaults[c]=parseInt(this.slider.dataset[c],10)))}},{key:'eachSlide',value:function eachSlide(b){if(b&&'function'==typeof b)for(var d,c=0;c<this.slides.length;c+=1)d=this.slides[c],b(d,c)}},{key:'registerBreakpoints',value:function registerBreakpoints(){var b,c,f,d=this.defaults.responsive;if('object'===('undefined'==typeof d?'undefined':_typeof(d))&&d.length)for(b in d)if(f=this.data.breakpoints.length-1,d.hasOwnProperty(b)){for(c=d[b].breakpoint;0<=f;)this.data.breakpoints[f]&&this.data.breakpoints[f]===c&&this.data.breakpoints.splice(f,1),f--;this.data.breakpoints.push(d[b].breakpoint),this.data.breakpointSettings.push(d[b].options)}}},{key:'checkResponsive',value:function checkResponsive(){var c,d,b=window.innerWidth;if(this.defaults.responsive&&this.defaults.responsive.length&&null!==this.defaults.responsive){d=null;for(var f=0;f<this.data.breakpoints.length;f+=1)c=this.data.breakpoints[f],b<=c&&(d=f);null===d?null!==this.data.activeBreakpoint&&(this.data.activeBreakpoint=null,this.overwriteOptions(this.options)):null===this.data.activeBreakpoint?(this.data.activeBreakpoint=this.data.breakpoints[d],this.overwriteOptions(this.data.breakpointSettings[d])):d!==this.data.activeBreakpoint&&(this.data.activeBreakpoint=this.data.breakpoints[d],this.overwriteOptions(this.data.breakpointSettings[d]))}}},{key:'checkIfInView',value:function checkIfInView(){this.data.activeSlides=[];for(var b=this.slides.length-1;-1<b;b--){var c=this.sliderWidth/2,d=this.getSlidePosition(b);if(0<=d.left&&d.right<=this.sliderWidth){var f=this.slides[b];this.data.currentSlide=b,this.data.activeSlides.push(f),this.addCurrentClass(f)}else{var g=this.slides[b];this.removeCurrentClass(g)}}}},{key:'setSliderWidth',value:function setSliderWidth(){null!==this.slider.parentNode&&(this.sliderWidth=this.slider.parentNode.offsetWidth,this.railsWidth=this.sliderWidth/this.defaults.amountOfSlides*this.slides.length,this.slider.style.width=this.railsWidth+'px')}},{key:'setSlideWidth',value:function setSlideWidth(b){var c=this;this.slideWidth=b?b:this.sliderWidth/this.defaults.amountOfSlides,this.slideWidthPercentage=100*(this.slideWidth/this.sliderWidth),!1!==this.defaults.forceSlideWidth&&this.eachSlide(function(d){d.style.width=c.slideWidth+'px'})}},{key:'setSlideIndex',value:function setSlideIndex(){this.eachSlide(function(b,c){if(b.hasAttribute('data-index')){var d=b.getAttribute('data-index');b.style.webkitBoxOrdinalGroup=d+1,b.style.msFlexOrder=d,b.style.order=d}else b.setAttribute('data-index',c),b.style.webkitOrdinalGroup=c+1,b.style.msFlexOrder=c,b.style.order=c})}},{key:'initEvents',value:function initEvents(){var b=this;window.addEventListener('resize',function(){b.checkResponsive(),b.sliderWidth=b.slider.offsetWidth,b.setSliderWidth(),b.setSlideWidth(),b.setParallaxPosition(),b.moveToCurrentSlide()},!1),(!0===this.defaults.pauseOnHover||1===this.defaults.pauseOnHover)&&(this.slider.addEventListener('mouseover',function(){!1===b.data.hovering&&b.stopInterval(),b.data.hovering=!0},!1),this.slider.addEventListener('mouseout',function(){!0===b.data.hovering&&b.startInterval(),b.data.hovering=!1},!1)),(!0===this.defaults.scroll||1===this.defaults.scroll)&&this.slider.addEventListener('wheel',function(c){var d=c.wheelDeltaY||1.5*-c.deltaY,f=d/b.defaults.scrollIntensity,g=b.data.currentPosition-f,h=b.getSliderPosition().right;0<d?h<b.sliderWidth+10?(b.moveTo(-b.railsWidth+b.sliderWidth),b.isParallaxActive()&&b.moveParallax(-b.railsWidth+b.sliderWidth)):(b.moveTo(g),b.isParallaxActive()&&b.moveParallax(g),Math.abs(b.getSliderPosition().left)>b.slideWidth/2+b.slideWidth*b.data.currentSlide&&(b.data.currentSlide+=1,b.setActiveSlides())):0>d&&(-10<g?(b.moveTo(0),b.isParallaxActive()&&b.moveParallax(0)):(b.moveTo(g),b.isParallaxActive()&&b.moveParallax(g),Math.abs(b.getSliderPosition().left)<b.slideWidth/2+b.slideWidth*(b.data.currentSlide-1)&&(b.data.currentSlide-=1,b.setActiveSlides()))),c.preventDefault()},!1),(!0===this.defaults.touch||1===this.defaults.touch)&&'ontouchstart'in window&&(this.slider.addEventListener('touchstart',function(c){b.data.touchStart=c.changedTouches[0].screenX},{passive:!1}),this.slider.addEventListener('touchmove',function(c){var d=(b.defaults.touchIntensity+10)/10,f=b.getSliderPosition().right;b.data.touchMove=c.changedTouches[0].screenX,b.data.touchDistance=b.data.currentSlide*b.slideWidth+(b.data.touchStart-b.data.touchMove),!1===b.data.animating&&(0<b.data.touchDistance&&b.sliderWidth<=f&&(b.moveTo(-b.data.touchDistance),b.isParallaxActive()&&b.moveParallax(-b.data.touchDistance)),b.stopInterval())},{passive:!1}),this.slider.addEventListener('touchend',function(c){b.data.touchEnd=c.changedTouches[0].screenX;var d=Math.abs(b.data.currentSlide*b.slideWidth-b.data.touchDistance);!1===b.data.animating&&(d>(b.defaults.touchTreshold||b.slideWidth/2)?b.data.touchDistance>b.data.currentSlide*b.slideWidth?b.moveSlider(b.defaults.slidesToScroll,1):b.data.touchDistance<b.data.currentSlide*b.slideWidth&&b.moveSlider(b.defaults.slidesToScroll,0):b.moveToCurrentSlide(),b.startInterval())},{passive:!1})),null!==this.defaults.prevButton&&this.defaults.prevButton.addEventListener('click',function(c){!1===b.data.animating&&b.moveSlider(b.defaults.slidesToScroll,0),(!0===b.defaults.autoplay||1===b.defaults.autoplay)&&b.stopInterval(!0),c.preventDefault()},!1),null!==this.defaults.nextButton&&this.defaults.nextButton.addEventListener('click',function(c){!1===b.data.animating&&b.moveSlider(b.defaults.slidesToScroll,1),(!0===b.defaults.autoplay||1===b.defaults.autoplay)&&b.stopInterval(!0),c.preventDefault()},!1)}},{key:'addTransition',value:function addTransition(b,c){if(b){var d;d=c&&'string'==typeof c?c:'transform',b.style.webkitTransition=d+' '+this.defaults.transitionSpeed+'ms '+this.defaults.easing,b.style.transition=d+' '+this.defaults.transitionSpeed+'ms '+this.defaults.easing}}},{key:'removeTransition',value:function removeTransition(b){var c=this;b&&setTimeout(function(){b.style.webkitTransition='',b.style.transition='',c.data.animating=!1},this.defaults.transitionSpeed)}},{key:'setActiveSlides',value:function setActiveSlides(){var b=this;this.eachSlide(function(f){b.removeCurrentClass(f)});for(var d,c=this.data.currentSlide;c<this.data.currentSlide+this.defaults.amountOfSlides;c++)d=this.slides[c],this.addCurrentClass(d)}},{key:'addCurrentClass',value:function addCurrentClass(b){b&&(b.setAttribute('aria-hidden',!1),b.classList.add(this.defaults.activeSlideClass))}},{key:'removeCurrentClass',value:function removeCurrentClass(b){b&&(b.setAttribute('aria-hidden',!0),b.classList.remove(this.defaults.activeSlideClass))}},{key:'addFlexToRails',value:function addFlexToRails(){this.slider.style.display='-webkit-flex',this.slider.style.display='-ms-flexbox',this.slider.style.display='flex',this.slider.style.webkitAlignItems='stretch',this.slider.style.alignItems='stretch'}},{key:'isParallaxActive',value:function isParallaxActive(){return'boolean'==typeof this.defaults.parallax&&!0===this.defaults.parallax||'number'==typeof this.defaults.parallax&&1===this.defaults.parallax||'string'==typeof this.defaults.parallax}},{key:'selectParallaxElements',value:function selectParallaxElements(){var b=this;'string'==typeof this.defaults.parallax?this.eachSlide(function(c){var d=c.querySelector(b.defaults.parallax);c.parallaxElement=d?d:c.firstElementChild}):'boolean'==typeof this.defaults.parallax&&!0===this.defaults.parallax&&this.eachSlide(function(c){c.parallaxElement=c.firstElementChild})}},{key:'setParallaxPosition',value:function setParallaxPosition(){var b=this;this.slideWidth=this.sliderWidth/this.defaults.amountOfSlides,this.isParallaxActive()&&(1===this.defaults.amountOfSlides?this.eachSlide(function(c,d){c.parallaxElement.style.right=b.slideWidth/b.defaults.parallaxIntensity*d+'px',c.parallaxElement.style.width=b.slideWidth+'px'}):this.eachSlide(function(c,d){c.parallaxElement.style.right=0,c.parallaxElement.style.width=b.slideWidth+b.slideWidth/b.defaults.parallaxIntensity*d+'px'}))}},{key:'getSliderPosition',value:function getSliderPosition(){var b=this.slider.getBoundingClientRect();return b}},{key:'getSlidePosition',value:function getSlidePosition(b){if('number'==typeof b){var c=this.slides[b],d=c.getBoundingClientRect();return d}}},{key:'getCurrentSlidePosition',value:function getCurrentSlidePosition(){var b=this.slides[this.data.currentSlide],c=b.getBoundingClientRect();return c}},{key:'getSlide',value:function getSlide(b){if('number'==typeof b&&0<=b&&b<this.slides.length){var c=this.slides[b];return c}}},{key:'moveTo',value:function moveTo(b){this.data.currentPosition=b,this.slider.style.webkitTransform='translate3d('+this.data.currentPosition+'px, 0, 0)',this.slider.style.transform='translate3d('+this.data.currentPosition+'px, 0, 0)'}},{key:'animateTo',value:function animateTo(b){this.data.currentPosition=b,this.addTransition(this.slider),this.slider.style.webkitTransform='translate3d('+this.data.currentPosition+'px, 0, 0)',this.slider.style.transform='translate3d('+this.data.currentPosition+'px, 0, 0)',this.removeTransition(this.slider)}},{key:'moveParallax',value:function moveParallax(b){var c=-b/this.defaults.parallaxIntensity;this.eachSlide(function(d){d.parallaxElement.style.webkitTransform='translate3d('+c+'px, 0, 0)',d.parallaxElement.style.transform='translate3d('+c+'px, 0, 0)'})}},{key:'animateParallax',value:function animateParallax(b){var d=this,c=-b/this.defaults.parallaxIntensity;this.eachSlide(function(f){d.addTransition(f.parallaxElement),f.parallaxElement.style.webkitTransform='translate3d('+c+'px, 0, 0)',f.parallaxElement.style.transform='translate3d('+c+'px, 0, 0)',d.removeTransition(f.parallaxElement)})}},{key:'moveToCurrentSlide',value:function moveToCurrentSlide(){var b=this.getSliderPosition().left-this.getCurrentSlidePosition().left;this.animateTo(b),this.isParallaxActive()&&this.animateParallax(b),this.setActiveSlides(),this.isParallaxActive()&&this.animateParallax(b)}},{key:'moveSlider',value:function moveSlider(b,c){var h=this;if(b&&!1===this.data.animating){this.data.animating=!0;var d=this.data.currentSlide,f=this.defaults.amountOfSlides,g=this.slides.length;1===c||!0===c?d+f-1+b<g?this.data.currentSlide+=b:d===g-f?this.data.currentSlide=0:d+f-1+b>=g&&(this.data.currentSlide=g-f):(0===c||!1===c)&&(0<d-b?this.data.currentSlide-=b:0===d?this.data.currentSlide=g-1-f+1:0>=d-b&&(this.data.currentSlide=0)),setTimeout(function(){h.data.animating=!1},this.defaults.transitionSpeed)}this.moveToCurrentSlide()}},{key:'animationState',value:function animationState(){var b=this;!1===this.data.animating&&(this.data.animating=!0,setTimeout(function(){b.data.animating=!1},this.defaults.transitionSpeed))}},{key:'startInterval',value:function startInterval(){var b=this;(!0===this.defaults.autoplay||1===this.defaults.autoplay)&&(this.data.interval=setInterval(function(){b.moveSlider(b.defaults.slidesToScroll,1)},this.defaults.autoplaySpeed))}},{key:'stopInterval',value:function stopInterval(b){clearInterval(this.data.interval),!0===b&&this.startInterval()}},{key:'currentSlide',get:function get(){for(var b=[],c=this.data.currentSlide;c<this.data.currentSlide+this.defaults.amountOfSlides;c+=1)b.push(this.slides[c]);return b},set:function set(b){if('number'==typeof b&&0<=b&&b<=this.slides.length-this.defaults.amountOfSlides){this.slides[b];this.data.currentSlide=b,this.moveToCurrentSlide()}}}]),a}();
